<div class="overlay" (click)="onOverlayClick($event)">
  <div class="add-container" [class.sliding-out]="isClosing">
    <!-- Close Button (Top Right) -->
    <button class="close-btn" (click)="closeOverlay()" type="button" aria-label="Close">
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" />
      </svg>
    </button>

    <!-- Left Side: Title Section -->
    <div class="left-section">
      <div class="logo" aria-hidden="true">
        <img src="assets/img/person-large-add.svg" alt="">
      </div>
      <h1>Add contact</h1>
      <p class="subtitle">Tasks are better with a team!</p>
      <div class="blue-line"></div>
    </div>

    <!-- Right Side: Form Section -->
    <div class="right-section">
      <!-- Avatar Circle -->
      <div class="avatar-circle" aria-hidden="true">
        <img src="assets/img/person-add.svg" alt="Person icon">
      </div>

      <!-- Form -->
      <form (ngSubmit)="onSubmit()" #f="ngForm" class="contact-form" novalidate>
        <!-- Name Input with Validation -->
        <div class="form-field">
          <div class="input-wrapper">
            <input type="text" id="name" [(ngModel)]="contact.name" name="name" placeholder="Name" required
              autocomplete="name" #nameInput="ngModel" [class.invalid]="nameInput.invalid && nameInput.touched">
            <img src="assets/img/person-icon-only.svg" alt="Name Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (nameInput.invalid && nameInput.touched) {
            @if (nameInput.errors?.['required']) {
            <span>Name ist ein Pflichtfeld.</span>
            }
            } @else if (nameInput.touched && hasInvalidCapitalization(contact.name)) {
            <span>Der erste Buchstabe muss groß geschrieben werden.</span>
            }
          </div>
        </div>

        <!-- Surname Input with Validation -->
        <div class="form-field">
          <div class="input-wrapper">
            <input type="text" id="surname" [(ngModel)]="contact.surname" name="surname" placeholder="Surname" required
              autocomplete="family-name" #surnameInput="ngModel"
              [class.invalid]="surnameInput.invalid && surnameInput.touched">
            <img src="assets/img/person-icon-only.svg" alt="Surname Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (surnameInput.invalid && surnameInput.touched) {
            @if (surnameInput.errors?.['required']) {
            <span>Nachname ist ein Pflichtfeld.</span>
            }
            } @else if (surnameInput.touched && hasInvalidCapitalization(contact.surname)) {
            <span>Der erste Buchstabe muss groß geschrieben werden.</span>
            }
          </div>
        </div>

        <!-- Email Input with Validation -->
        <div class="form-field">
          <div class="input-wrapper">
            <input type="email" id="email" [(ngModel)]="contact.email" name="email" placeholder="Email" required email
              autocomplete="email" #emailInput="ngModel" [class.invalid]="emailInput.invalid && emailInput.touched">
            <img src="assets/img/mail-icon-only.svg" alt="Email Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (emailInput.invalid && emailInput.touched) {
            @if (emailInput.errors?.['required']) {
            <span>Email ist ein Pflichtfeld.</span>
            } @else if (emailInput.errors?.['email']) {
            <span>Bitte geben Sie eine gültige Email-Adresse ein.</span>
            }
            } @else if (emailInput.touched && hasInvalidEmailFormat(contact.email)) {
            <span>Email muss das Format name@domain.endung haben.</span>
            }
          </div>
        </div>

        <!-- Phone Input with Validation -->
        <div class="form-field">
          <div class="input-wrapper">
            <input type="tel" id="phone" [(ngModel)]="contact.phone" name="phone" placeholder="Phone" autocomplete="tel"
              #phoneInput="ngModel"
              [class.invalid]="(phoneInput.invalid && phoneInput.touched) || (phoneInput.touched && hasInvalidPhoneFormat(contact.phone))">
            <img src="assets/img/call-icon-only.svg" alt="Phone Icon" class="input-icon">
          </div>

          <!-- Reserved space for validation message -->
          <div class="validation-message">
            @if (phoneInput.touched && hasInvalidPhoneFormat(contact.phone)) {
            <span>Telefonnummer muss mind. 6 Ziffern lang sein (+ am Anfang erlaubt).</span>
            }
          </div>
        </div>

        <!-- Buttons -->
        <div class="button-group">
          <button type="button" class="btn-cancel" (click)="closeOverlay()">
            Cancel
            <div class="input-icon"></div>
          </button>

          <button type="submit" class="btn-create" [disabled]="!isFormValid(f)">
            Create contact
            <img src="assets/img/check-icon-only.svg" alt="Create Icon" class="input-icon">
          </button>
        </div>
      </form>
    </div>
  </div>
</div>